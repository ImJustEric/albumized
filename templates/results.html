<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Results â€” Albumized</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
  <main class="container">
    <h1 class="site-title">Results</h1>
    <section class="results-top">
      {% if img %}
        <img id="inputImage" class="input-preview" src="{{ img }}" alt="Uploaded image" />
      {% else %}
        <div class="input-preview" style="display:flex;align-items:center;justify-content:center;padding:28px;">No image available</div>
      {% endif %}
    </section>

    <section>
        <div id="resultsGrid" class="results-grid">
        {% for item in results %}
            <div class="result-card" data-idx="{{ loop.index0 }}">
            <img class="album-thumb" src="{{ item.album_url }}" alt="album image" loading="lazy">
            <div class="meta">
                <div class="title">{{ item.get('name', 'Unknown album') }}</div>
                <div class="artist">
                {{ item.get('artist') | join(', ') if item.get('artist') else 'Unknown artist' }}
                </div>
                <div class="links">
                {% if item.get('spotify_url') %}
                    <a href="{{ item.get('spotify_url') }}" target="_blank" rel="noopener noreferrer">Listen on Spotify</a>
                {% endif %}
                </div>
            </div>
            </div>
        {% endfor %}
        </div>
    </section>
  </main>
</body>
</html>
